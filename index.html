<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Hello, World! - A-Frame</title>
  <meta name="description" content="Hello, World! - A-Frame">
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
</head>

<body>
  <div class="wrapper">
    <a-scene>

      <a-assets>
        <a-asset-item id="robot" src="robot.glb"></a-asset-item>
      </a-assets>
      <a-entity gltf-model="#robot" id="robot-1" modify-materials scale="0.01 0.01 0.01" position="1 1.5 -3"></a-entity>

      <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>
      <a-sky color="whitesmoke"></a-sky>

    </a-scene>

    <div class="clickables">
      <!-- elementi UI; tipo EXIT/BACK -->
      <div class="btn" data-btn="1">CLICK</div>
    </div>

    <div class="windows">
      <div class="content" data-content="1">
        Lorem ipsum, dolor sit amet consectetur adipisicing elit.
        Rem explicabo voluptatum nobis debitis illum fugit veritatis eligendi at perferendis. Dignissimos.
      </div>
    </div>

  </div>
</body>

<style>
  .wrapper {
    outline: 2px dashed red;
    position: relative;
    width: 100%;
    height: 100%;
  }
  .clickables {
    outline: 2px dotted blue;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 100;
  }
  .btn {
    position: absolute;
    width: 140px;
    height: 70px;
    background-color: red;
    color: white;
    border-radius: 8px;
    top: 20%;
    left: 5%;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .btn {}

  .clickables {
    opacity: 1;
    pointer-events: initial;
    user-select: initial;
  }

  .clickables.disabled {
    opacity: 0;
    pointer-events: none;
    user-select: none;
  }
</style>

<script>
  var sceneEl = document.querySelector('a-scene')

  AFRAME.registerComponent('modify-materials', {
    init: function () {
      // Wait for model to load.
      this.el.addEventListener('model-loaded', () => {
        // Grab the mesh / scene.
        //const obj = this.el.getObject3D('mesh');
        console.log("model is loaded")
      });
    }
  });

  var robot = sceneEl.querySelector("#robot-1")
  // 0 0.5 -4

  //property: position; to: 0.5 0.75 -3.5; dur: 4000;
  robot.setAttribute('animation__001', {
    'property': 'position',
    'to': { x: 0.5, y: 0.75, z: -3.5 },
    'startEvents': 'startanim001',
    'dur': 1000,
  });
  robot.setAttribute('animation__002', {
    'property': 'rotation',
    'to': { x: 45, y: 70, z: 15 },
    'startEvents': 'startanim002',
    'dur': 1000,
  });
  robot.setAttribute('animation__003', {
    'property': 'scale',
    'to': { x: 0.02, y: 0.02, z: 0.02 },
    'startEvents': 'startanim003',
    'dur': 1000,
  });

  document.querySelector(".btn").addEventListener("click",() => {
    console.log("clicked")
    robot.emit(`startanim001`, null, false)
    robot.emit(`startanim002`, null, false)
    robot.emit(`startanim003`, null, false)
  })



</script>

</html>