<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Lotrek A-Frame Prototype</title>
  <meta name="description" content="Lotrek A-Frame Prototype">
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="wrapper">
    <a-scene>
      <a-camera wasd-controls-enabled="false" look-controls-enabled="false"></a-camera>
      <a-assets>
        <a-asset-item id="muletto" src="muletto.glb"></a-asset-item>
      </a-assets>
      <a-entity 
        gltf-model="#muletto" id="muletto-1"  
        scale="0.02 0.02 0.02" position="-0.15 1 -2.5" rotation="0 -65 0" 
        animation__0_2="property: rotation; to: 0 -65 0; startEvents: startanim0_2"
        animation__1_2="property: rotation; to: 10 70 40; startEvents: startanim1_2" 
        animation__2_2="property: rotation; to: 1 -40 -10; startEvents: startanim2_2"
        ></a-entity>

      <!-- <a-sky color="#FFFAFA"></a-sky> -->

    </a-scene>

    <div class="details">
      <h1 class="details__title">
        LOTREK
        <br>
        A-FRAME
        <br>
        PROTOTYPE
      </h1>
    </div>

    <div class="clickables">
      <div class="btn-back">BACK</div>
      <div class="btn btn-1">Animation 1</div>
      <div class="btn btn-2">Animation 2</div>
    </div>

    <div class="windows">
      <div class="content content-1">
        <h2>Animation 1 - Focus</h2>
        <p>
          Lorem ipsum dolor sit amet consectetur, adipisicing elit. 
          Explicabo ratione autem fuga a qui error eos natus omnis nobis ab!
        </p>
      </div>
      <div class="content content-2">
        <h2>Animation 2 - Focus</h2>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. 
          Omnis maiores libero assumenda eligendi labore doloremque voluptas deserunt soluta ad eius.
        </p>
      </div>
    </div>

  </div>
</body>

<script>
  var sceneEl = document.querySelector('a-scene')
  var muletto = sceneEl.querySelector("#muletto-1")

  // ANIMATION 0 - DEFAULT
  muletto.setAttribute('animation__0_1', {
    'property': 'position',
    'to': { x: -0.15, y: 1, z: -2.5 },
    'startEvents': 'startanim0_1',
    'dur': 1000,
  });
  muletto.setAttribute('animation__0_3', {
    'property': 'scale',
    'to': { x: 0.02, y: 0.02, z: 0.02 },
    'startEvents': 'startanim0_3',
    'dur': 1000,
  });
  
  // ANIMATION 1
  muletto.setAttribute('animation__1_1', {
    'property': 'position',
    'to': { x: -0.5, y: 0.75, z: -3.5 },
    'startEvents': 'startanim1_1',
    'dur': 1000,
  });
  muletto.setAttribute('animation__1_3', {
    'property': 'scale',
    'to': { x: 0.035, y: 0.035, z: 0.035 },
    'startEvents': 'startanim1_3',
    'dur': 1000,
  });

  // ANIMATION 2
  muletto.setAttribute('animation__2_1', {
    'property': 'position',
    'to': { x: 0.5, y: 0.25, z: -5 },
    'startEvents': 'startanim2_1',
    'dur': 1000,
  });
  muletto.setAttribute('animation__2_3', {
    'property': 'scale',
    'to': { x: 0.045, y: 0.045, z: 0.045 },
    'startEvents': 'startanim2_3',
    'dur': 1000,
  });

  function setBack(num) {
    document.querySelectorAll(".btn").forEach(element => {
      element.classList.add("disabled")
    });
    document.querySelector(".btn-back").classList.add("active")
    document.querySelector(".content.active")?.classList.remove("active")
    document.querySelector(".content-"+num).classList.add("active")
  }

  function goBack() {
    document.querySelectorAll(".btn").forEach(element => {
      element.classList.remove("disabled")
    });
    document.querySelector(".btn-back").classList.remove("active")
    document.querySelector(".content.active")?.classList.remove("active")
  }

  document.querySelector(".btn-1").addEventListener("click",() => {
    muletto.emit(`startanim1_1`)
    muletto.emit(`startanim1_2`)
    muletto.emit(`startanim1_3`)
    setBack(1)
  })

  document.querySelector(".btn-2").addEventListener("click",() => {
    muletto.emit(`startanim2_1`)
    muletto.emit(`startanim2_2`)
    muletto.emit(`startanim2_3`)
    setBack(2)
  })

  document.querySelector(".btn-back").addEventListener("click", () => {
    muletto.emit(`startanim0_1`)
    muletto.emit(`startanim0_2`)
    muletto.emit(`startanim0_3`)
    goBack()
  })
</script>

</html>