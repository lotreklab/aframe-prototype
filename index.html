<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Hello, World! - A-Frame</title>
  <meta name="description" content="Hello, World! - A-Frame">
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400&display=swap" rel="stylesheet">
</head>

<body>
  <div class="wrapper">
    <a-scene>
      <a-camera wasd-controls-enabled="false" look-controls-enabled="false"></a-camera>
      <a-assets>
        <a-asset-item id="muletto" src="muletto.glb"></a-asset-item>
      </a-assets>
      <a-entity 
        gltf-model="#muletto" id="muletto-1"  
        scale="0.02 0.02 0.02" position="-0.15 1 -2.5" rotation="0 -65 0" 
        animation__0_2="property: rotation; to: 0 -65 0; startEvents: startanim0_2"
        animation__1_2="property: rotation; to: 10 70 40; startEvents: startanim1_2" 
        animation__2_2="property: rotation; to: 1 -40 -10; startEvents: startanim2_2"
        ></a-entity>

      <a-sky color="whitesmoke"></a-sky>

    </a-scene>

    <div class="clickables">
      <div class="btn-back">BACK</div>
      <div class="btn btn-1">Animation 1</div>
      <div class="btn btn-2">Animation 2</div>
    </div>

    <div class="windows">
      <div class="content content-1">
        <h1>Animation 1 - Focus</h1>
        <p>
          Lorem ipsum dolor sit amet consectetur, adipisicing elit. 
          Explicabo ratione autem fuga a qui error eos natus omnis nobis ab!
        </p>
      </div>
      <div class="content content-2">
        <h1>Animation 2 - Focus</h1>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. 
          Omnis maiores libero assumenda eligendi labore doloremque voluptas deserunt soluta ad eius.
        </p>
      </div>
    </div>

  </div>
</body>

<style>
  :root {
    --black: #081729;
    --dark:  #24547d;
    --blue:  #3bb3ad;
    --white:   #ddebdd;
  }
  body {
    font-family: 'Kanit', sans-serif;
    font-weight: 400;
  }
  .wrapper {
    position: relative;
    width: 100%;
    height: 100%;
  }
  .clickables {
    position: absolute;
    top: 20%;
    left: 5%;
    width: 100%;
    height: 100%;
    z-index: 100;
    max-width: 200px;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    justify-content: baseline;
  }
  .windows {
    position: absolute;
    bottom: 20%;
    right: 5%;
    width: 100%;
    height: 100%;
    z-index: 100;
    max-width: 300px;
  }
  .content {
    position: absolute;
    bottom: 0;
    right: 0;
    padding: 1rem;
    border-radius: 0.5rem;
    background-color: var(--white);
    color: var(--dark);
    border: 2px solid var(--blue);
    opacity: 0;
    pointer-events: none;
    user-select: none;
    transition: all ease-in-out .25s;
  }
  .content.active {
    opacity: 1;
    pointer-events: initial;
    user-select: initial;
  }
  .btn {
    padding: 0.25rem 1.5rem;
    color: var(--white);
    background-color: var(--blue);
    border: 2px solid var(--dark);
    border-radius: 0.5rem;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    margin-bottom: 0.5rem;
    transition: all ease-in-out .25s;
  }
  .btn-back {
    padding: 0.25rem 1.5rem;
    color: var(--white);
    background-color: var(--blue);
    border: 2px solid var(--dark);
    border-radius: 0.5rem;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    margin-bottom: 0.5rem;
    transition: all ease-in-out .25s;
    opacity: 0;
    pointer-events: none;
    user-select: none;
  }
  .btn-back.active {
    opacity: 1;
    pointer-events: initial;
    user-select: initial;
  }
  .btn.disabled {
    opacity: 0;
    pointer-events: none;
    user-select: none;
  }

  .clickables {
    opacity: 1;
    pointer-events: initial;
    user-select: initial;
  }
  .clickables.disabled {
    opacity: 0;
    pointer-events: none;
    user-select: none;
  }
</style>

<script>
  var sceneEl = document.querySelector('a-scene')
  var muletto = sceneEl.querySelector("#muletto-1")

  // ANIMATION 0 - DEFAULT
  muletto.setAttribute('animation__0_1', {
    'property': 'position',
    'to': { x: -0.15, y: 1, z: -2.5 },
    'startEvents': 'startanim0_1',
    'dur': 1000,
  });
  muletto.setAttribute('animation__0_3', {
    'property': 'scale',
    'to': { x: 0.02, y: 0.02, z: 0.02 },
    'startEvents': 'startanim0_3',
    'dur': 1000,
  });
  
  // ANIMATION 1
  muletto.setAttribute('animation__1_1', {
    'property': 'position',
    'to': { x: -0.5, y: 0.75, z: -3.5 },
    'startEvents': 'startanim1_1',
    'dur': 1000,
  });
  muletto.setAttribute('animation__1_3', {
    'property': 'scale',
    'to': { x: 0.035, y: 0.035, z: 0.035 },
    'startEvents': 'startanim1_3',
    'dur': 1000,
  });

  // ANIMATION 2
  muletto.setAttribute('animation__2_1', {
    'property': 'position',
    'to': { x: 0.5, y: 0.25, z: -5 },
    'startEvents': 'startanim2_1',
    'dur': 1000,
  });
  muletto.setAttribute('animation__2_3', {
    'property': 'scale',
    'to': { x: 0.045, y: 0.045, z: 0.045 },
    'startEvents': 'startanim2_3',
    'dur': 1000,
  });

  function setBack(num) {
    document.querySelectorAll(".btn").forEach(element => {
      element.classList.add("disabled")
    });
    document.querySelector(".btn-back").classList.add("active")
    document.querySelector(".content.active")?.classList.remove("active")
    document.querySelector(".content-"+num).classList.add("active")
  }

  function goBack() {
    document.querySelectorAll(".btn").forEach(element => {
      element.classList.remove("disabled")
    });
    document.querySelector(".btn-back").classList.remove("active")
    document.querySelector(".content.active")?.classList.remove("active")
  }

  document.querySelector(".btn-1").addEventListener("click",() => {
    muletto.emit(`startanim1_1`, null, false)
    muletto.emit(`startanim1_2`, null, false)
    muletto.emit(`startanim1_3`, null, false)
    setBack(1)
  })

  document.querySelector(".btn-2").addEventListener("click",() => {
    muletto.emit(`startanim2_1`, null, false)
    muletto.emit(`startanim2_2`, null, false)
    muletto.emit(`startanim2_3`, null, false)
    setBack(2)
  })

  document.querySelector(".btn-back").addEventListener("click", () => {
    muletto.emit(`startanim0_1`, null, false)
    muletto.emit(`startanim0_2`, null, false)
    muletto.emit(`startanim0_3`, null, false)
    goBack()
  })
</script>

</html>